type Contract {
  id: ID!
  templateId: Int!
  contractNo: String!
  title: String!
  content: String!
  parties: JSON!
  status: String!
  validFrom: String
  validUntil: String
  signedAt: String
  createdBy: String!
  createdAt: String!
  updatedAt: String!
  template: ContractTemplate
  signatures: [Signature!]
}

type Signature {
  id: ID!
  contractId: Int!
  userId: String!
  signedName: String!
  signedAt: String!
  ipAddress: String!
  signature: String
  otpVerified: Boolean!
}

extend type Query {
  contracts: [Contract!]!
  contract(id: ID!): Contract
  contractsByStatus(status: String!): [Contract!]!
}

input CreateContractInput {
  templateId: Int!
  title: String!
  parties: JSON!
  validFrom: String
  validUntil: String
}

input UpdateContractInput {
  id: ID!
  title: String
  content: String
  parties: JSON
  status: String
  validFrom: String
  validUntil: String
}

extend type Mutation {
  createContract(input: CreateContractInput!): Contract
  updateContract(input: UpdateContractInput!): Contract
  deleteContract(id: ID!): Boolean
  signContract(contractId: ID!, signedName: String!, signature: String): Signature
}
